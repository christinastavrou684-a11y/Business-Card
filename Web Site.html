<!DOCTYPE html>
<html lang="el">
<head>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff9a9e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Card Generator</title>

    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

    <style>
        body { font-family: Arial; background: linear-gradient(135deg, #ff9a9e, #fad0c4); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); width: 350px; text-align: center; color: white; }
        input { width: 100%; padding: 10px; margin: 10px 0; border: none; border-radius: 10px; box-sizing: border-box; }
        button { padding: 12px 20px; border: none; border-radius: 20px; background: #ff6b6b; color: white; cursor: pointer; font-weight: bold; transition: 0.3s; margin: 5px; }
        button:hover { transform: scale(1.05); }
        #preview { background: white; color: black; padding: 20px; border-radius: 10px; margin-top: 20px; display: none; width: 300px; margin: 20px auto; }
        #qr-canvas { margin: 10px auto; display: flex; justify-content: center; }
        .linkedin-btn { background: #0077b5 !important; }
        .reset-btn { background: #f39c12 !important; }
        .website-btn { background: #1da1f2 !important; }
        .qr-btn { background: #2ecc71 !important; }
    </style>
</head>

<body>
<div class="container">
    <h2>Business Card Generator</h2>

    <input type="text" id="name" placeholder="ÎŒÎ½Î¿Î¼Î±">
    <input type="text" id="phone" placeholder="Î¤Î·Î»Î­Ï†Ï‰Î½Î¿">
    <input type="email" id="email" placeholder="Email">
    <input type="url" id="website" placeholder="Website URL">
    <input type="url" id="linkedin" placeholder="LinkedIn URL">
    <input type="text" id="company" placeholder="Î•Ï„Î±Î¹ÏÎµÎ¯Î±">
    <input type="text" id="job" placeholder="Î˜Î­ÏƒÎ·">

    <button onclick="updatePreview()">Preview</button>
    <button onclick="downloadVCard()">vCard</button>
    <button onclick="openWebsite()" class="website-btn">Website</button>
    <button onclick="openLinkedIn()" class="linkedin-btn">LinkedIn</button>

    <div id="vcard-url-box" style="display:none; margin-top:15px;">
        <p><b>Î¤Î¿ URL Ï„Î¿Ï… contact ÏƒÎ¿Ï…:</b></p>
        <input type="text" id="vcard-url" readonly onclick="this.select()">
        <button onclick="navigator.clipboard.writeText(document.getElementById('vcard-url').value)">Copy URL</button>
    </div>

    <button onclick="generateVCardURL()" class="qr-btn">Generate URL for NFC</button>
    <button onclick="downloadQR()" class="qr-btn">QR Download</button>
    <button onclick="resetForm()" class="reset-btn">Reset</button>

    <div id="preview">
        <h3 id="name-preview"></h3>
        <p id="job-preview"></p>
        <p id="company-preview"></p>
        <p id="phone-preview"></p>
        <p id="email-preview"></p>
        <p id="website-preview"></p>
        <p id="linkedin-preview"></p>
        <div id="qr-canvas"></div>
    </div>
</div>

<script>
function updatePreview() {
    const name = document.getElementById('name').value.trim();
    if (!name) { alert("Î Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³Î®ÏƒÏ„Îµ Ï„Î¿Ï…Î»Î¬Ï‡Î¹ÏƒÏ„Î¿Î½ Î­Î½Î± ÏŒÎ½Î¿Î¼Î±"); return; }

    document.getElementById('name-preview').textContent = name;
    document.getElementById('job-preview').textContent = document.getElementById('job').value.trim();
    document.getElementById('company-preview').textContent = document.getElementById('company').value.trim();
    document.getElementById('phone-preview').textContent = 'ðŸ“ž ' + document.getElementById('phone').value.trim();
    document.getElementById('email-preview').textContent = 'âœ‰ï¸ ' + document.getElementById('email').value.trim();
    document.getElementById('website-preview').textContent = 'ðŸŒ ' + document.getElementById('website').value.trim();
    document.getElementById('linkedin-preview').textContent = 'ðŸ”— ' + document.getElementById('linkedin').value.trim();
    document.getElementById('preview').style.display = 'block';
    generateQR();
}

function generateVCard() {
    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const email = document.getElementById('email').value.trim();
    const company = document.getElementById('company').value.trim();
    const job = document.getElementById('job').value.trim();
    const website = document.getElementById('website').value.trim();
    const linkedin = document.getElementById('linkedin').value.trim();

    if (!name || !phone) return null;

    // Î”Î¿Î¼Î® vCard 3.0 Î¼Îµ Ï€ÎµÎ´Î¯Î¿ N Î³Î¹Î± ÏƒÏ‰ÏƒÏ„Î® Ï„Î±Î¾Î¹Î½ÏŒÎ¼Î·ÏƒÎ· Î¿Î½ÏŒÎ¼Î±Ï„Î¿Ï‚
    let vCardData = `BEGIN:VCARD\nVERSION:3.0\nFN:${name}\nN:;${name};;;\nTEL:${phone}\nEMAIL:${email}\nORG:${company}\nTITLE:${job}`;
    if (website) vCardData += `\nURL:${website}`;
    if (linkedin) vCardData += `\nURL:${linkedin}`;
    vCardData += `\nEND:VCARD`;

    return vCardData;
}

function generateQR() {
    const vcard = generateVCard();
    if (!vcard) return;
    const qrContainer = document.getElementById("qr-canvas");
    qrContainer.innerHTML = ""; 
    new QRCode(qrContainer, { text: vcard, width: 128, height: 128 });
}

function downloadQR() {
    const vcard = generateVCard();
    if (!vcard) {
        alert("Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ ÎŒÎ½Î¿Î¼Î± ÎºÎ±Î¹ Î¤Î·Î»Î­Ï†Ï‰Î½Î¿!");
        return;
    }

    const qrDiv = document.createElement("div");
    qrDiv.style.position = "absolute";
    qrDiv.style.left = "-9999px";
    document.body.appendChild(qrDiv);

    new QRCode(qrDiv, { 
        text: vcard, 
        width: 400, 
        height: 400,
        correctLevel: QRCode.CorrectLevel.M 
    });

    setTimeout(() => {
        const canvas = qrDiv.querySelector("canvas");
        if (canvas) {
            const a = document.createElement("a");
            a.href = canvas.toDataURL("image/png");
            const fileName = document.getElementById('name').value.trim().replace(/[^a-zA-Z0-9]/g, "_") || "QR";
            a.download = "QR_" + fileName + ".png";
            a.click();
        }
        document.body.removeChild(qrDiv);
    }, 400);
}

function downloadVCard() {
    const vcard = generateVCard();
    if (!vcard) { alert("Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ Ï„Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î±!"); return; }
    const blob = new Blob([vcard], { type: "text/vcard;charset=utf-8" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = document.getElementById('name').value.trim().replace(/\s+/g, "_") + ".vcf";
    a.click();
}

function openWebsite() {
    let url = document.getElementById('website').value.trim();
    if (!url) return;
    if (!/^https?:\/\//i.test(url)) url = 'https://' + url;
    window.open(url, '_blank');
}

function openLinkedIn() {
    let url = document.getElementById('linkedin').value.trim();
    if (!url) return;
    if (!/^https?:\/\//i.test(url)) url = 'https://' + url;
    window.open(url, '_blank');
}

function generateVCardURL() {
    const vcard = generateVCard();
    if (!vcard) return;
    const blob = new Blob([vcard], { type: "text/vcard;charset=utf-8" });
    const url = URL.createObjectURL(blob);
    document.getElementById("vcard-url").value = url;
    document.getElementById("vcard-url-box").style.display = "block";
}

function resetForm() {
    document.querySelectorAll("input").forEach(i => i.value = "");
    document.getElementById("preview").style.display = "none";
    document.getElementById("vcard-url-box").style.display = "none";
}
</script>
</body>
</html>